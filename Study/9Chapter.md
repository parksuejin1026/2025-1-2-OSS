# 9. Git 이력 관리 및 VS Code 연동

## 9.1. 브랜치 리베이스 (Rebase)

### 1. Rebase 개요
* **정의**: 브랜치 생성의 **Base(공통 조상)를 새로운 커밋으로 재배치**해서 이력을 통합하는 방식임.
* **목적**: 커밋 히스토리를 분기 없이 **하나의 선형** 줄기로 단순화하고 깨끗하게 남김.
* **주의**: Rebase 시 원래 커밋의 ID와 이력이 **변경**됨. 이미 외부에 공개된(푸시된) 커밋에는 사용하면 안 됨.

### 2. Rebase 병합 과정
1.  **작업 브랜치로 이동**: `git checkout topic`.
2.  **Rebase 수행**: `git rebase main` (topic 브랜치의 base를 main의 최신 커밋 뒤로 옮김).
3.  **기준 브랜치로 이동**: `git checkout main`.
4.  **최종 병합**: `git merge topic` (보통 Fast-forward 병합으로 main의 HEAD를 이동함).

### 3. Rebase 충돌 해결
* **충돌 발생**: Rebase 중 커밋 하나하나를 옮길 때 내용 충돌이 발생할 수 있음.
* **해결 절차**:
    1.  충돌이 난 파일을 직접 수정함.
    2.  수정 파일을 스테이지 영역에 추가함: `git add <수정파일>`.
    3.  Rebase를 계속 수행함: `git rebase --continue`.

---

## 9.2. 커밋 이력 수정

### 1. 최신 HEAD 커밋 수정 (`--amend`)
* **`--amend`**: 최신 커밋(HEAD)의 내용이나 메시지를 수정해서 **새로운 커밋 ID**로 덮어쓰는 명령임.

| 명령어 | 수정 내용 | 결과 |
| :--- | :--- | :--- |
| `git commit --amend` | 설정된 편집기로 메시지 수정. | 새로운 커밋 ID로 수정됨. |
| `git commit --amend -m 'new msg'`| 새 메시지를 직접 입력해서 수정. | 새로운 커밋 ID로 수정됨. |
| `git commit --amend --no-edit` | 수정한 파일/추가 파일을 최신 커밋에 반영하고, 메시지는 수정하지 않음. | 새로운 커밋 ID로 수정됨. |

### 2. 대화형 리베이스 (Rebase -i)로 여러 커밋 수정
* **명령어**: `git rebase -i HEAD~n`.
    * `HEAD~n`: 수정할 커밋의 **직전 커밋**을 지정함.

| 대화형 명령어 | 단축키 | 설명 |
| :--- | :--- | :--- |
| **pick** | `p` | 해당 커밋을 수정 없이 그대로 사용함. |
| **reword** | `r` | 개별 커밋 메시지를 다시 작성함. |
| **squash** | `s` | **이후 커밋(최신)**을 **이전 커밋(오래된)**에 결합해서 하나의 커밋으로 만듦. |
| **drop** | `d` | 커밋 자체를 삭제함. |

---

## 9.3. VS Code에서 Git 활용

### 1. 기본 활용 및 상태 확인
* **저장소 생성**: '소스 제어' 활동바에서 '저장소 초기화'를 클릭함.
* **Changes (작업 디렉토리)**: 커밋되지 않은 변경 사항이 표시됨 (수정됨).
* **Staged Changes (스테이지 영역)**: 커밋할 준비가 된 변경 사항이 표시됨 (add 완료).
* **커밋**: 메시지 입력 후 'Commit' 버튼을 클릭함.

### 2. 수정 작업 취소 (Restore)
* **작업 디렉토리 취소**: Changes 항목의 파일 옆 'Discard Changes' 메뉴를 사용함. (작업 디렉토리 내용 취소)
* **스테이지 영역 취소**: Staged Changes 항목의 파일 옆 'Unstage Changes' 메뉴를 사용함. (스테이지 영역에서 제거)

### 3. 파일 비교 (Diff)
* **Git Graph 확장**: Git Graph 확장을 설치해서 GUI로 커밋 로그 이력과 파일 비교를 시각적으로 확인할 수 있음.
* **비교 동작**: Git Graph에서 특정 커밋을 눌러 이전 커밋과 파일 내용을 비교할 수 있음.